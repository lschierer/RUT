[[!comment format=mdwn
claimedauthor="Luke Schierer"
url="http://www.schierer.org/~luke"
subject="Re: Why&#x2026;"
date="2006-09-28T21:32:12Z"
content="""
<p>Oh, I have the source code from their FTP server, http://www.areca.com.tw/ does not make it hard to find, even though the FTP server itself is just an IP address, with no domain name.  That is rather besides the point.</p>

<p>I need to install an RHEL4.4 system using an areca card.  That is one point version newer than they support officially, though it works just fine.  This means the install procedure is as follows:</p>

<ol>
<li>Install RHEL4.4 onto a IDE or SATA hard drive.  Either way, make sure it shows up as hd* not sd*, so that this is not more complex than need be.</li>
<li>Get the source code for the module from the website.</li>
<li>Compile the source code out of tree.  This is fortunately not hard, Areca provides the necessary command in their README file.</li>
<li>Install the module</li>
<li>run depmod</li>
<li>insert the module</li>
<li>partition your raid array</li>
<li>format the partitions</li>
<li>create a /mnt/areca, and mount your intended / partition to it.</li>
<li>repeat for any additional partitions your install will use.  For our customers, this means /, /tmp, /var, /usr, /usr/local, /home and /data</li>
<li>having mounted all your partitions inside /mnt/areca, cp -avx /* /mnt/areca/</li>
<li>grub-install --recheck /dev/sda</li>
</ol>

<p>At this point I am somewhat hazy, as I was sidetracked earlier today and have not in fact finished this install, I spent most of today since the last post doing other projects.</p>

<ol start="13">
<li>Edit /boot/grub/devices.map and remove the IDE drive from the list, and change the number of the sda drive, decrementing it.</li>
<li>grub-install /dev/sda</li>
<li>chroot /mnt/areca/</li>
<li>edit the list of modules used for building the initrd image.  This will vary from version of RH to version of RH</li>
<li>rebuild a custom initrd image.</li>
<li>edit the /boot/grub/menu.lst to use the new initrd image.  Make sure you are still in the chroot when you do this</li>
<li>NOW exit out of the chroot</li>
<li>unmount all partitions</li>
<li>shutdown, remove the ide drive</li>
<li>boot and cross your fingers</li>
</ol>

<p>Basically, it doubles the time to install.  Moreover, it means that our customers cannot simply grab an updated kernel from RH's errata, but, having done so, must now follow directions that they will not remember if simply told, and will lose if given in file or printout form, to compile and install the additional module, and to build the custom initrd image.  Which means the entire system is more fragile.</p>

<p>This gets compounded when you start working with diskless images to be served up for nodes.</p>

"""]]